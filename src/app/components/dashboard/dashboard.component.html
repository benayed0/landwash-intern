<div class="app-container" [class.webview-mode]="authService.isWebView()">
  <!-- Sidebar Navigation - Visible for all browser users -->
  @if(!authService.isWebView()) {
  <div class="sidebar" [class.collapsed]="sidebarCollapsed()">
    <div class="sidebar-header">
      <div class="logo">
        <img src="assets/logo.png" class="logo-img" alt="Landwash Logo" />
        <span class="logo-text" [class.hidden]="sidebarCollapsed()"
          >Landwash Admin</span
        >
      </div>
      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <span class="toggle-icon">{{ sidebarCollapsed() ? "→" : "←" }}</span>
      </button>
    </div>

    <nav class="sidebar-nav">
      <button
        class="nav-item"
        [class.active]="viewType() === 'bookings'"
        (click)="switchToBookings()"
      >
        <span class="nav-icon">🚗</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Réservations</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'orders'"
        (click)="switchToOrders()"
      >
        <span class="nav-icon">📦</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Commandes</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'subscriptions'"
        (click)="switchToSubscriptions()"
      >
        <span class="nav-icon">💳</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Abonnements</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'analytics'"
        (click)="switchToAnalytics()"
      >
        <span class="nav-icon">📊</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Analytics</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'products'"
        (click)="switchToProducts()"
      >
        <span class="nav-icon">🧴</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Produits</span
        >
      </button>
    </nav>

    <div class="sidebar-footer">
      <button class="logout-btn" (click)="logout()">
        <span class="logout-icon">🚪</span>
        <span class="logout-text" [class.hidden]="sidebarCollapsed()"
          >Déconnexion</span
        >
      </button>
    </div>
  </div>
  }

  <!-- Content Area -->
  <div
    class="content-container"
    [class.webview-mode]="authService.isWebView()"
    [class.with-sidebar]="!authService.isWebView()"
    [class.sidebar-collapsed]="!authService.isWebView() && sidebarCollapsed()"
  >
    <!-- Bookings View -->
    <div class="view-container" [class.active]="viewType() === 'bookings'">
      <app-booking-list *ngIf="viewType() === 'bookings'"></app-booking-list>
    </div>

    <!-- Orders View -->
    <div class="view-container" [class.active]="viewType() === 'orders'">
      <app-order-list *ngIf="viewType() === 'orders'"></app-order-list>
    </div>

    <!-- Subscriptions View -->
    <div class="view-container" [class.active]="viewType() === 'subscriptions'">
      <app-subscription-list
        *ngIf="viewType() === 'subscriptions'"
      ></app-subscription-list>
    </div>

    <!-- Analytics View -->
    <div class="view-container" [class.active]="viewType() === 'analytics'">
      <app-analytics *ngIf="viewType() === 'analytics'"></app-analytics>
    </div>

    <!-- Products View -->
    <div class="view-container" [class.active]="viewType() === 'products'">
      <app-products *ngIf="viewType() === 'products'"></app-products>
    </div>
  </div>
</div>
