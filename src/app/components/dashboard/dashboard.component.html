<div class="app-container" [class.platform-ios]="isIOS">
  <!-- Mobile Navbar - Visible for all browser users on mobile -->
  <div class="mobile-navbar">
    <div class="navbar-logo">
      <img src="assets/logo.png" class="logo-img" alt="Landwash Logo" />
      <span class="logo-text">Landwash</span>
    </div>
    <button class="menu-toggle" (click)="toggleSidebar()">
      <span class="menu-icon">â˜°</span>
    </button>
  </div>

  <!-- Sidebar Overlay -->
  <div
    class="sidebar-overlay"
    [class.active]="!sidebarCollapsed()"
    (click)="closeSidebar()"
  ></div>

  <!-- Sidebar Navigation -->
  <div class="sidebar" [class.open]="!sidebarCollapsed()">
    <nav class="sidebar-nav" [class.platform-ios]="isIOS">
      <button
        class="nav-item"
        [class.active]="viewType() === 'bookings'"
        (click)="switchToBookings()"
      >
        <span class="nav-icon">ğŸš—</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >RÃ©servations</span
        >
      </button>
      @if((authService.currentUser$ | async)?.role==='admin'){
      <button
        class="nav-item"
        [class.active]="viewType() === 'orders'"
        (click)="switchToOrders()"
      >
        <span class="nav-icon">ğŸ“¦</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Commandes</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'subscriptions'"
        (click)="switchToSubscriptions()"
      >
        <span class="nav-icon">ğŸ’³</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Abonnements</span
        ></button
      >}
      <button
        class="nav-item"
        [class.active]="viewType() === 'analytics'"
        (click)="switchToAnalytics()"
      >
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Analytics</span
        >
      </button>
      @if((authService.currentUser$ | async)?.role==='admin'){
      <button
        class="nav-item"
        [class.active]="viewType() === 'products'"
        (click)="switchToProducts()"
      >
        <span class="nav-icon">ğŸ§´</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Produits</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'personals'"
        (click)="switchToPersonals()"
      >
        <span class="nav-icon">ğŸ‘¤ğŸ‘¤</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Personnels</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'users'"
        (click)="switchToUsers()"
      >
        <span class="nav-icon">ğŸ§</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Clients</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'discounts'"
        (click)="switchToDiscounts()"
      >
        <span class="nav-icon">ğŸ·ï¸</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >RÃ©ductions</span
        >
      </button>
      <button
        class="nav-item"
        [class.active]="viewType() === 'services'"
        (click)="switchToServices()"
      >
        <span class="nav-icon">âš™ï¸</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Services</span
        >
      </button>
      }
      <button
        class="nav-item"
        [class.active]="viewType() === 'profile'"
        (click)="switchToProfile()"
      >
        <span class="nav-icon">ğŸ‘¤</span>
        <span class="nav-label" [class.hidden]="sidebarCollapsed()"
          >Mon Profil</span
        >
      </button>
      <button class="logout-btn" (click)="logout()">
        <span class="logout-icon">ğŸšª</span>
        <span class="logout-text" [class.hidden]="sidebarCollapsed()"
          >DÃ©connexion</span
        >
      </button>
    </nav>

    <div class="sidebar-footer">
      <!-- <button class="logout-btn" (click)="logout()">
        <span class="logout-icon">ğŸšª</span>
        <span class="logout-text" [class.hidden]="sidebarCollapsed()"
          >DÃ©connexion</span
        >
      </button> -->
    </div>
  </div>

  <!-- Content Area -->
  <div class="content-container" [class.platform-ios]="isIOS">
    <!-- Bookings View -->
    <div class="view-container" [class.active]="viewType() === 'bookings'">
      <app-booking-list *ngIf="viewType() === 'bookings'"></app-booking-list>
    </div>

    <!-- Orders View -->
    <div class="view-container" [class.active]="viewType() === 'orders'">
      <app-order-list *ngIf="viewType() === 'orders'"></app-order-list>
    </div>

    <!-- Subscriptions View -->
    <div class="view-container" [class.active]="viewType() === 'subscriptions'">
      <app-subscription-list
        *ngIf="viewType() === 'subscriptions'"
      ></app-subscription-list>
    </div>

    <!-- Analytics View -->
    <div class="view-container" [class.active]="viewType() === 'analytics'">
      <app-analytics *ngIf="viewType() === 'analytics'"></app-analytics>
    </div>

    <!-- Products View -->
    <div class="view-container" [class.active]="viewType() === 'products'">
      <app-products *ngIf="viewType() === 'products'"></app-products>
    </div>
    <!-- Personals View -->
    <div class="view-container" [class.active]="viewType() === 'personals'">
      <app-teams *ngIf="viewType() === 'personals'"></app-teams>
    </div>
    <!-- Profile View -->
    <div class="view-container" [class.active]="viewType() === 'profile'">
      <app-profile *ngIf="viewType() === 'profile'"></app-profile>
    </div>
    <!-- Clients View -->
    <div class="view-container" [class.active]="viewType() === 'users'">
      <app-users *ngIf="viewType() === 'users'"></app-users>
    </div>
    <!-- Discount View -->
    <div class="view-container" [class.active]="viewType() === 'discounts'">
      <app-discount-list *ngIf="viewType() === 'discounts'"></app-discount-list>
    </div>
    <!-- Services View -->
    <div class="view-container" [class.active]="viewType() === 'services'">
      <app-services *ngIf="viewType() === 'services'"></app-services>
    </div>
  </div>
</div>
