<div class="blocked-date-card" [class.editing]="isEditing()">
  <!-- Card Header -->
  <div class="card-header">
    <div class="date-range">
      <span class="date-label">Periode bloquee:</span>
      <span class="date-value" *ngIf="!isEditing()">
        {{ formatDate(blockedDate.startDate) }} - {{ formatDate(blockedDate.endDate) }}
      </span>
    </div>
    <div class="card-actions">
      <mat-chip [class]="'status-chip ' + statusColor()">
        {{ statusText() }}
      </mat-chip>
      <div class="action-buttons" *ngIf="!isEditing()">
        <button
          mat-icon-button
          class="edit-btn"
          (click)="startEdit()"
          title="Modifier"
        >
          <mat-icon>edit</mat-icon>
        </button>
        <button
          mat-icon-button
          class="delete-btn"
          (click)="confirmDelete()"
          title="Supprimer"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Card Content -->
  <div class="card-content">
    <div class="blocked-date-info">
      <!-- Date Range -->
      <div class="info-row" *ngIf="!isEditing()">
        <div class="info-item">
          <span class="label">Date de debut:</span>
          <span class="value">
            {{ formatDate(blockedDate.startDate) }}
          </span>
        </div>
        <div class="info-item">
          <span class="label">Date de fin:</span>
          <span class="value" [class.expired]="isExpired()">
            {{ formatDate(blockedDate.endDate) }}
          </span>
        </div>
      </div>
      <div class="info-row" *ngIf="isEditing()">
        <div class="info-item full-width">
          <span class="label">Periode:</span>
          <mat-form-field appearance="outline" class="compact-field full-width">
            <mat-date-range-input [rangePicker]="editRangePicker">
              <input matStartDate [(ngModel)]="editForm().startDate" placeholder="Debut" />
              <input matEndDate [(ngModel)]="editForm().endDate" placeholder="Fin" />
            </mat-date-range-input>
            <mat-datepicker-toggle matIconSuffix [for]="editRangePicker"></mat-datepicker-toggle>
            <mat-date-range-picker #editRangePicker></mat-date-range-picker>
          </mat-form-field>
        </div>
      </div>

      <!-- Reason -->
      <div class="info-row">
        <div class="info-item full-width">
          <span class="label">Raison:</span>
          <span *ngIf="!isEditing()" class="value">
            {{ blockedDate.reason || 'Aucune raison specifiee' }}
          </span>
          <mat-form-field *ngIf="isEditing()" appearance="outline" class="compact-field full-width">
            <input
              matInput
              [(ngModel)]="editForm().reason"
              placeholder="Raison (optionnel)"
            />
          </mat-form-field>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Actions -->
  <div class="edit-actions" *ngIf="isEditing()">
    <button mat-stroked-button class="cancel-btn" (click)="cancelEdit()">
      <mat-icon>close</mat-icon>
      Annuler
    </button>
    <button mat-raised-button color="primary" class="save-btn" (click)="saveChanges()">
      <mat-icon>check</mat-icon>
      Sauvegarder
    </button>
  </div>
</div>
